import{a as R}from"./chunk-UCJ6GRSX.js";import{a as J}from"./chunk-664O5X2G.js";import"./chunk-FKWMOKFF.js";import"./chunk-5VKYLTWQ.js";import{a as L}from"./chunk-Y76QO3KO.js";import{a as F}from"./chunk-OSWCQDFV.js";import{d as k}from"./chunk-5O4WDRVK.js";import{b as T,d as P,e as H,g as j,h as D,i as G,j as M,k as A,o as O,p as $,q as B}from"./chunk-WNM2FDHQ.js";import{f as V}from"./chunk-EG6VKY43.js";import{Aa as _,La as S,Na as v,Pa as y,Qa as E,Ra as w,Sa as N,Ta as n,Ua as t,Va as c,X as C,Ya as x,Za as g,_a as p,cb as o,ea as u,eb as d,fa as f,ib as I,za as a}from"./chunk-7AR2EFHR.js";import{d as h}from"./chunk-4CLCTAJ7.js";function W(s,m){s&1&&(n(0,"p",9),o(1,"Loading"),t())}function X(s,m){if(s&1){let l=x();n(0,"div",27)(1,"div",20)(2,"div",21)(3,"label",22),o(4),t(),c(5,"input",31),t()(),n(6,"div",20)(7,"div",21)(8,"label",22),o(9),t(),c(10,"input",32),t()(),n(11,"div",20)(12,"div",21)(13,"label",22),o(14),t(),c(15,"input",33),n(16,"app-img-uploader",34),g("imgHanle",function(e){let i,b=u(l).$implicit;return f((i=b.get("image"))==null?null:i.patchValue(e))}),t()()(),n(17,"div",20)(18,"div",21)(19,"label",22),o(20),t(),c(21,"input",35),t()(),n(22,"div",20)(23,"div",21)(24,"label",22),o(25),t(),c(26,"input",36),t()(),n(27,"button",37),g("click",function(){let e=u(l).$index,i=p(2);return f(i.remove(e))}),o(28,"X"),t()()}if(s&2){let l,r=m.$implicit,e=m.$index,i=p(2);v("formGroupName",e),a(4),d("Type (",i.lang.lang,")"),a(5),d("Title (",i.lang.lang,")"),a(5),d("Image (",i.lang.lang,")"),a(2),v("image",(l=r.get("image"))==null?null:l.value),a(4),d("Button (",i.lang.lang,")"),a(5),d("Link (",i.lang.lang,")")}}function q(s,m){if(s&1){let l=x();n(0,"form",11),g("ngSubmit",function(){u(l);let e=p();return f(e.onSubmit())}),n(1,"div")(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15)(6,"h4",16),o(7,"Destacados Section "),t(),n(8,"button",17),g("click",function(){u(l);let e=p();return f(e.addPost())}),o(9,"Add New"),t()(),n(10,"div",18)(11,"div",19)(12,"div",20)(13,"div",21)(14,"label",22),o(15),t(),c(16,"input",23),t()(),n(17,"div",20)(18,"div",21)(19,"label",22),o(20),t(),c(21,"input",24),t()(),n(22,"div",20)(23,"div",21)(24,"label",22),o(25),t(),c(26,"input",25),t()()()()()(),n(27,"div",14)(28,"div",15)(29,"h4",16),o(30,"Destacados Posts "),t(),n(31,"button",17),g("click",function(){u(l);let e=p();return f(e.addPost())}),o(32,"Add New"),t()(),n(33,"div",26),w(34,X,29,7,"div",27,E),t()()(),n(36,"div",28)(37,"div",29)(38,"button",30),o(39,"Update"),t()()()()()}if(s&2){let l=p();v("formGroup",l.form),a(15),d("Section Title (",l.lang.lang,")"),a(5),d("Section Description (",l.lang.lang,")"),a(5),d("Section Button (",l.lang.lang,")"),a(9),N(l.posts().controls)}}var oe=(()=>{let m=class m{constructor(r,e,i,b,U){this.fb=r,this.notification=e,this.myFormService=i,this.service=b,this.lang=U,this.loading=!0,this.init={menubar:!0,plugins:"lists link image table code help wordcount"},this.form=this.fb.group({section_title:[""],section_description:[""],section_button:[""],posts:this.fb.array([])})}ngOnInit(){this.getRecod()}getRecod(){this.service.loading=!0,this.service.find("home_posts").subscribe({next:r=>{let e=r.data.home_posts?JSON.parse(r.data.home_posts):[];this.posts().clear(),e.posts&&e.posts.forEach(i=>{this.posts().push(this.fb.group({type:[i.type,""],title:[i.title,""],image:[i.image,""],button:[i.button,""],link:[i.link,""]}))}),this.form.patchValue({section_title:e.section_title,section_description:e.section_description,section_button:e.section_button}),this.service.loading=!1},error:r=>{this.service.loading=!1}})}posts(){return this.form.get("posts")}addPost(){this.posts().push(this.fb.group({type:["",""],title:["",""],image:["",""],button:["",""],link:["",""]}))}onSubmit(){return h(this,null,function*(){if(this.form.valid){this.service.loading=!0;let r={name:"home_posts",data:JSON.stringify(this.form.value)};this.service.update(r).subscribe({next:e=>{this.service.loading=!1,this.notification.success(e.message)},error:e=>{let i=e.error;i?i.errors?this.notification.error(Object.values(i.errors)[0]):this.notification.error(i.message):this.notification.error("Something Went Wrong"),this.service.loading=!1}})}else this.notification.error("Validation Failed")})}remove(r){this.posts().removeAt(r)}};m.\u0275fac=function(e){return new(e||m)(_(O),_(k),_(L),_(J),_(F))},m.\u0275cmp=C({type:m,selectors:[["app-home-posts"]],standalone:!0,features:[I],decls:14,vars:1,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"text-center"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","align-items-center"],[1,"mb-0","text-white"],["type","button",1,"btn","btn-success","text-white",3,"click"],[1,"card-body"],[1,"row","mb-4","px-3","py-3","border"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],["formControlName","section_title",1,"form-control"],["formControlName","section_description",1,"form-control"],["formControlName","section_button",1,"form-control"],["formArrayName","posts",1,"card-body"],[1,"row","mb-4","px-3","py-3","border","box-seprator",3,"formGroupName"],[1,"row","pb-3"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-info","text-white"],["formControlName","type","placeholder","Type",1,"form-control"],["formControlName","title","placeholder","Title",1,"form-control"],["formControlName","image","placeholder","Image",1,"d-none","form-control"],[3,"imgHanle","image"],["formControlName","button","placeholder","Button",1,"form-control"],["formControlName","link","placeholder","Link",1,"form-control"],["type","button",1,"delete_btn","btn","btn-danger",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h4",2),o(3,"Destacados"),t()(),n(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),o(9,"Admin"),t()(),n(10,"li",8),o(11,"Home"),t()()()()(),S(12,W,2,0,"p",9)(13,q,40,4,"form",10)),e&2&&(a(12),y(i.service.loading?12:13))},dependencies:[V,B,j,T,P,H,D,A,G,M,$,R],styles:[`.box-seprator[_ngcontent-%COMP%]{
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
        position: relative;
    }

    .delete_btn[_ngcontent-%COMP%]{
        position: absolute;
        right: 1px;
        width: 36px;
        top: 2px;
    }`]});let s=m;return s})();export{oe as HomePostsComponent};
