import{a as J}from"./chunk-UCJ6GRSX.js";import{a as P}from"./chunk-664O5X2G.js";import"./chunk-FKWMOKFF.js";import"./chunk-5VKYLTWQ.js";import{a as R}from"./chunk-Y76QO3KO.js";import{a as I}from"./chunk-OSWCQDFV.js";import{d as V}from"./chunk-5O4WDRVK.js";import{b as H,d as T,e as j,g as G,h as M,i as A,j as O,k as $,o as B,p as D,q as L}from"./chunk-WNM2FDHQ.js";import{f as k}from"./chunk-EG6VKY43.js";import{Aa as d,La as C,Na as v,Pa as w,Qa as y,Ra as E,Sa as N,Ta as o,Ua as i,Va as g,X as S,Ya as b,Za as f,_a as c,cb as r,ea as p,eb as _,fa as u,ib as F,za as s}from"./chunk-7AR2EFHR.js";import{d as x}from"./chunk-4CLCTAJ7.js";function W(l,a){l&1&&(o(0,"p",9),r(1,"Loading"),i())}function X(l,a){if(l&1){let m=b();o(0,"div",19)(1,"div",23)(2,"div",24)(3,"label",25),r(4),i(),g(5,"input",26),i()(),o(6,"div",23)(7,"div",24)(8,"label",25),r(9),i(),g(10,"input",27),o(11,"app-img-uploader",28),f("imgHanle",function(t){let e,h=p(m).$implicit;return u((e=h.get("image"))==null?null:e.patchValue(t))}),i()()(),o(12,"div",23)(13,"div",24)(14,"label",25),r(15),i(),g(16,"input",29),i()(),o(17,"div",23)(18,"div",24)(19,"label",25),r(20),i(),g(21,"input",30),i()(),o(22,"button",31),f("click",function(){let t=p(m).$index,e=c(2);return u(e.remove(t))}),r(23,"X"),i()()}if(l&2){let m,n=a.$implicit,t=a.$index,e=c(2);v("formGroupName",t),s(4),_("Title (",e.lang.lang,")"),s(5),_("Image (",e.lang.lang,")"),s(2),v("image",(m=n.get("image"))==null?null:m.value),s(4),_("Button (",e.lang.lang,")"),s(5),_("Link (",e.lang.lang,")")}}function q(l,a){if(l&1){let m=b();o(0,"form",11),f("ngSubmit",function(){p(m);let t=c();return u(t.onSubmit())}),o(1,"div")(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15)(6,"h4",16),r(7,"Slider Form "),i(),o(8,"button",17),f("click",function(){p(m);let t=c();return u(t.addSlider())}),r(9,"Add New"),i()(),o(10,"div",18),E(11,X,24,6,"div",19,y),i()()()(),o(13,"div",20)(14,"div",21)(15,"button",22),r(16,"Update"),i()()()()()}if(l&2){let m=c();v("formGroup",m.form),s(11),N(m.sliders().controls)}}var oe=(()=>{let a=class a{constructor(n,t,e,h,U){this.fb=n,this.notification=t,this.myFormService=e,this.service=h,this.lang=U,this.loading=!0,this.init={menubar:!0,plugins:"lists link image table code help wordcount"},this.form=this.fb.group({sliders:this.fb.array([])}),this.service.loadSetting()}ngOnInit(){this.getRecod()}getRecod(){this.service.loading=!0,this.service.find("home_slider").subscribe(n=>{let t=n.data.home_slider?JSON.parse(n.data.home_slider):[];this.sliders().clear(),t.forEach(e=>{this.sliders().push(this.fb.group({title:[e.title,""],image:[e.image,""],button:[e.button,""],link:[e.link,""]}))}),this.service.loading=!1})}sliders(){return this.form.get("sliders")}addSlider(){this.sliders().push(this.fb.group({title:["",""],image:["",""],button:["",""],link:["",""]})),console.log("===================================="),console.log(this.sliders().controls),console.log("====================================")}onSubmit(){return x(this,null,function*(){if(this.form.valid){this.service.loading=!0;let n={name:"home_slider",data:JSON.stringify(this.form.value.sliders)};this.service.update(n).subscribe({next:t=>{this.service.loading=!1,this.notification.success(t.message)},error:t=>{let e=t.error;e?e.errors?this.notification.error(Object.values(e.errors)[0]):this.notification.error(e.message):this.notification.error("Something Went Wrong"),this.service.loading=!1}})}else this.notification.error("Validation Failed")})}remove(n){this.sliders().removeAt(n)}};a.\u0275fac=function(t){return new(t||a)(d(B),d(V),d(R),d(P),d(I))},a.\u0275cmp=S({type:a,selectors:[["app-admin-setting-home-slider"]],standalone:!0,features:[F],decls:14,vars:1,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"text-center"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","align-items-center"],[1,"mb-0","text-white"],["type","button",1,"btn","btn-success","text-white",3,"click"],["formArrayName","sliders",1,"card-body"],[1,"row","mb-4","px-3","py-3","border","box-seprator",3,"formGroupName"],[1,"row","pb-3"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-info","text-white"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],["formControlName","title","placeholder","Title",1,"form-control"],["formControlName","image",1,"d-none","form-control"],[3,"imgHanle","image"],["formControlName","button","placeholder","Button",1,"form-control"],["formControlName","link","placeholder","Link",1,"form-control"],["type","button",1,"delete_btn","btn","btn-danger",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h4",2),r(3,"Slider"),i()(),o(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),r(9,"Admin"),i()(),o(10,"li",8),r(11,"Home"),i()()()()(),C(12,W,2,0,"p",9)(13,q,17,1,"form",10)),t&2&&(s(12),w(e.service.loading?12:13))},dependencies:[k,L,G,H,T,j,M,$,A,O,D,J],styles:[`.box-seprator[_ngcontent-%COMP%]{
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
        position: relative;
    }

    .delete_btn[_ngcontent-%COMP%]{
        position: absolute;
        right: 1px;
        width: 36px;
        top: 2px;
    }`]});let l=a;return l})();export{oe as SettingHomeSliderComponent};
