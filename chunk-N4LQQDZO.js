import{a as $}from"./chunk-C6P77QXR.js";import"./chunk-SUONLQWJ.js";import{a as L}from"./chunk-Z5IQARTU.js";import{a as F}from"./chunk-WLIO6G5M.js";import{d as k}from"./chunk-UI6BEQHS.js";import{b as T,d as V,e as P,g as j,h as D,i as G,j as H,k as M,o as A,p as O,q as B}from"./chunk-OWL564RZ.js";import{f as I}from"./chunk-G2EJMNH5.js";import{$a as p,Aa as s,Ba as u,Ma as S,Oa as b,Qa as C,Ra as y,Sa as E,Ta as w,Ua as n,Va as e,Wa as c,X as h,Za as g,_a as x,ab as o,cb as d,ea as f,fa as v,fb as N}from"./chunk-2SQSF67M.js";import{d as _}from"./chunk-4CLCTAJ7.js";function W(a,m){a&1&&(n(0,"p",9),o(1,"Loading"),e())}function U(a,m){if(a&1){let l=g();n(0,"div",27)(1,"div",20)(2,"div",21)(3,"label",22),o(4),e(),c(5,"input",31),e()(),n(6,"div",20)(7,"div",21)(8,"label",22),o(9),e(),c(10,"input",32),e()(),n(11,"div",20)(12,"div",21)(13,"label",22),o(14),e(),c(15,"input",33),e()(),n(16,"div",20)(17,"div",21)(18,"label",22),o(19),e(),c(20,"input",34),e()(),n(21,"div",20)(22,"div",21)(23,"label",22),o(24),e(),c(25,"input",35),e()(),n(26,"button",36),x("click",function(){let t=f(l).$index,r=p(2);return v(r.remove(t))}),o(27,"X"),e()()}if(a&2){let l=m.$index,i=p(2);b("formGroupName",l),s(4),d("Type (",i.lang.lang,")"),s(5),d("Title (",i.lang.lang,")"),s(5),d("Image (",i.lang.lang,")"),s(5),d("Button (",i.lang.lang,")"),s(5),d("Link (",i.lang.lang,")")}}function X(a,m){if(a&1){let l=g();n(0,"form",11),x("ngSubmit",function(){f(l);let t=p();return v(t.onSubmit())}),n(1,"div")(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15)(6,"h4",16),o(7,"Destacados Section "),e(),n(8,"button",17),x("click",function(){f(l);let t=p();return v(t.addPost())}),o(9,"Add New"),e()(),n(10,"div",18)(11,"div",19)(12,"div",20)(13,"div",21)(14,"label",22),o(15),e(),c(16,"input",23),e()(),n(17,"div",20)(18,"div",21)(19,"label",22),o(20),e(),c(21,"input",24),e()(),n(22,"div",20)(23,"div",21)(24,"label",22),o(25),e(),c(26,"input",25),e()()()()()(),n(27,"div",14)(28,"div",15)(29,"h4",16),o(30,"Destacados Posts "),e(),n(31,"button",17),x("click",function(){f(l);let t=p();return v(t.addPost())}),o(32,"Add New"),e()(),n(33,"div",26),E(34,U,28,6,"div",27,y),e()()(),n(36,"div",28)(37,"div",29)(38,"button",30),o(39,"Update"),e()()()()()}if(a&2){let l=p();b("formGroup",l.form),s(15),d("Section Title (",l.lang.lang,")"),s(5),d("Section Description (",l.lang.lang,")"),s(5),d("Section Button (",l.lang.lang,")"),s(9),w(l.posts().controls)}}var ie=(()=>{let m=class m{constructor(i,t,r,R,J){this.fb=i,this.notification=t,this.myFormService=r,this.service=R,this.lang=J,this.loading=!0,this.init={menubar:!0,plugins:"lists link image table code help wordcount"},this.form=this.fb.group({section_title:[""],section_description:[""],section_button:[""],posts:this.fb.array([])})}ngOnInit(){this.getRecod()}getRecod(){this.service.loading=!0,this.service.find("home_posts").subscribe({next:i=>{let t=i.data.home_posts?JSON.parse(i.data.home_posts):[];this.posts().clear(),t.posts&&t.posts.forEach(r=>{this.posts().push(this.fb.group({type:[r.type,""],title:[r.title,""],image:[r.image,""],button:[r.button,""],link:[r.link,""]}))}),this.form.patchValue({section_title:t.section_title,section_description:t.section_description,section_button:t.section_button}),this.service.loading=!1},error:i=>{this.service.loading=!1}})}posts(){return this.form.get("posts")}addPost(){this.posts().push(this.fb.group({type:["",""],title:["",""],image:["",""],button:["",""],link:["",""]}))}onSubmit(){return _(this,null,function*(){if(this.form.valid){this.service.loading=!0;let i={name:"home_posts",data:JSON.stringify(this.form.value)};this.service.update(i).subscribe({next:t=>{this.service.loading=!1,this.notification.success(t.message)},error:t=>{let r=t.error;r?r.errors?this.notification.error(Object.values(r.errors)[0]):this.notification.error(r.message):this.notification.error("Something Went Wrong"),this.service.loading=!1}})}else this.notification.error("Validation Failed")})}remove(i){this.posts().removeAt(i)}};m.\u0275fac=function(t){return new(t||m)(u(A),u(k),u(L),u($),u(F))},m.\u0275cmp=h({type:m,selectors:[["app-home-posts"]],standalone:!0,features:[N],decls:14,vars:1,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"text-center"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","align-items-center"],[1,"mb-0","text-white"],["type","button",1,"btn","btn-success","text-white",3,"click"],[1,"card-body"],[1,"row","mb-4","px-3","py-3","border"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],["formControlName","section_title",1,"form-control"],["formControlName","section_description",1,"form-control"],["formControlName","section_button",1,"form-control"],["formArrayName","posts",1,"card-body"],[1,"row","mb-4","px-3","py-3","border","box-seprator",3,"formGroupName"],[1,"row","pb-3"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-info","text-white"],["formControlName","type","placeholder","Type",1,"form-control"],["formControlName","title","placeholder","Title",1,"form-control"],["formControlName","image","placeholder","Image",1,"form-control"],["formControlName","button","placeholder","Button",1,"form-control"],["formControlName","link","placeholder","Link",1,"form-control"],["type","button",1,"delete_btn","btn","btn-danger",3,"click"]],template:function(t,r){t&1&&(n(0,"div",0)(1,"div",1)(2,"h4",2),o(3,"Destacados"),e()(),n(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),o(9,"Admin"),e()(),n(10,"li",8),o(11,"Home"),e()()()()(),S(12,W,2,0,"p",9)(13,X,40,4,"form",10)),t&2&&(s(12),C(r.service.loading?12:13))},dependencies:[I,B,j,T,V,P,D,M,G,H,O],styles:[`.box-seprator[_ngcontent-%COMP%]{
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
        position: relative;
    }

    .delete_btn[_ngcontent-%COMP%]{
        position: absolute;
        right: 1px;
        width: 36px;
        top: 2px;
    }`]});let a=m;return a})();export{ie as HomePostsComponent};
