import{b as Y}from"./chunk-RRRUJOTJ.js";import{a as E}from"./chunk-WLIO6G5M.js";import{a as L,b as B,c as H,d as R}from"./chunk-UI6BEQHS.js";import{e as W,f as G,g as q,m as J,n as K,p as Q,q as X}from"./chunk-OWL564RZ.js";import{c as z,e as N,f as A,h as v,i as V,o as D}from"./chunk-G2EJMNH5.js";import{$a as u,Aa as s,Ba as _,Ma as x,Oa as c,P as O,Qa as b,Ra as k,Sa as M,Ta as j,U as f,Ua as t,Va as e,Wa as m,X as $,Za as C,_a as h,ab as r,bb as S,ea as y,fa as F,fb as I,gb as T,hb as U,va as g}from"./chunk-2SQSF67M.js";import{d as P}from"./chunk-4CLCTAJ7.js";var Z=(()=>{let o=class o{constructor(i,n,l,p,w){this.http=i,this.router=n,this.appService=l,this.adminService=p,this.language=w,this.apiUrl=L.apiUrl,this.data=[]}list(i){let n=`${this.apiUrl}/admin/filemanagers?search=${i.search}`;return this.http.get(n,{headers:new v({Authorization:`Bearer ${this.adminService.token}`,"Content-Type":"application/json"})})}create(i){let n=`${this.apiUrl}/admin/filemanagers`,l=i;return this.http.post(n,l,{headers:new v({Authorization:`Bearer ${this.adminService.token}`})})}edit(i){let n=`${this.apiUrl}/admin/posts/${i}?lang=${this.language.lang}`;return this.http.get(n,{headers:new v({Authorization:`Bearer ${this.adminService.token}`,"Content-Type":"application/json"})})}update(i){let n=`${this.apiUrl}/admin/posts/${i.id}?lang=${this.language.lang}`,l=i;return this.http.put(n,l,{headers:new v({Authorization:`Bearer ${this.adminService.token}`,"Content-Type":"application/json"})})}delete(i){let n=`${this.apiUrl}/admin/filemanagers/${i}`;return this.http.delete(n,{headers:new v({Authorization:`Bearer ${this.adminService.token}`,"Content-Type":"application/json"})})}};o.\u0275fac=function(n){return new(n||o)(f(V),f(D),f(B),f(H),f(E))},o.\u0275prov=O({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var ne=a=>({show:a}),le=()=>({display:"block"}),re=()=>({"padding-left":"0px"});function ae(a,o){a&1&&(t(0,"p",28),r(1,"Loading"),e())}function oe(a,o){if(a&1){let d=C();t(0,"tr")(1,"td"),r(2),e(),t(3,"td"),m(4,"img",44),e(),t(5,"td")(6,"a",45),r(7),e()(),t(8,"td"),r(9),e(),t(10,"td",43)(11,"div",46)(12,"a",47),m(13,"i",48),e(),t(14,"a",49),h("click",function(){let n=y(d).$implicit,l=u(2);return F(l.delete(n.id))}),m(15,"i",50),e()()()()}if(a&2){let d=o.$implicit;s(2),S(d.id),s(2),c("src",d.link,g),s(2),c("href",d.link,g),s(),S(d.title),s(2),S(d.extension)}}function de(a,o){if(a&1&&(t(0,"div",29)(1,"table",41)(2,"thead",42)(3,"tr")(4,"th",28),r(5,"#"),e(),t(6,"th",28),r(7,"Image"),e(),t(8,"th",28),r(9,"Title"),e(),t(10,"th",28),r(11,"Extension"),e(),t(12,"th",43),r(13,"Action"),e()()(),t(14,"tbody",42),M(15,oe,16,5,"tr",null,k),e()()()),a&2){let d=u();s(15),j(d.files)}}function se(a,o){if(a&1){let d=C();t(0,"div",31)(1,"div",51)(2,"div",52)(3,"div",53),m(4,"img",54),t(5,"div",55)(6,"ul",56)(7,"li")(8,"a",57),m(9,"i",58),e()(),t(10,"li")(11,"a",59),h("click",function(){let n=y(d).$implicit,l=u();return F(l.delete(n.id))}),m(12,"i",60),e()()()()(),t(13,"div",61)(14,"p",62),r(15),e()()()()()}if(a&2){let d=o.$implicit;s(4),c("src",d.link,g),s(4),c("href",d.link,g),s(7),S(d.name)}}function me(a,o){a&1&&(t(0,"p",28),r(1,"Loading"),e())}function ce(a,o){if(a&1&&(t(0,"div",69)(1,"label",65),r(2,"File Preview"),e(),t(3,"div",72),m(4,"img",54),e()()),a&2){let d=u(2);s(4),c("src",d.selectedPrev,g)}}function pe(a,o){if(a&1){let d=C();t(0,"div",9)(1,"div",63)(2,"div",64)(3,"label",65),r(4,"Image"),e(),t(5,"input",66),h("change",function(n){y(d);let l=u();return F(l.onFileSelected(n))}),e()()(),t(6,"div",67)(7,"div",64)(8,"label",65),r(9,"File Name"),e(),m(10,"input",68),e()(),t(11,"div",67)(12,"div",64)(13,"label",65),r(14,"File Size"),e(),m(15,"input",68),e()(),t(16,"div",67)(17,"div",64)(18,"label",65),r(19,"File Type"),e(),m(20,"input",68),e()(),t(21,"div",67)(22,"div",64)(23,"label",65),r(24,"File Extension"),e(),m(25,"input",68),e()(),x(26,ce,5,1,"div",69),t(27,"div",70)(28,"button",71),r(29,"Upload"),e()()()}if(a&2){let d,i=u();s(10),c("value",i.selectedFile==null?null:i.selectedFile.name),s(5),c("value",i.selectedFile==null?null:i.selectedFile.size),s(5),c("value",i.selectedFile==null?null:i.selectedFile.type),s(5),c("value",i.selectedFile==null||i.selectedFile.name==null||(d=i.selectedFile.name.split("."))==null?null:d.pop()),s(),b(i.selectedPrev?26:-1)}}function he(a,o){a&1&&m(0,"div",40)}var we=(()=>{let o=class o{constructor(i,n,l,p){this.notification=i,this.myFormService=n,this.lang=l,this.service=p,this.search="",this.fileDropdown=!1,this.loader=!1,this.modal=!1,this.selectedFile=null,this.selectedPrev="",this.files=[]}ngOnInit(){this.getFiles()}hanldeSearch(i){let n=i.target.value;this.search=n,this.getFiles()}getFiles(){this.loader=!0,this.service.list({search:this.search}).subscribe({next:i=>{this.files=i.data.data,this.loader=!1},error:i=>{this.loader=!1}})}handleModal(){this.modal=!this.modal}onFileSelected(i){let n=i.target;if(n.files&&n.files.length>0){this.selectedFile=n.files[0];let l=new FileReader;l.onload=p=>{this.selectedPrev=l.result},l.readAsDataURL(this.selectedFile)}}onSubmit(){return P(this,null,function*(){if(this.selectedFile){this.loader=!0;let i=new FormData;i.append("file",this.selectedFile,this.selectedFile.name),this.service.create(i).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.selectedFile=null,this.selectedPrev=null,this.getFiles()},error:n=>{let l=n.error;l?l.errors?this.notification.error(Object.values(l.errors)[0]):this.notification.error(l.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}else this.notification.error("File Not Found")})}handle_fileDropdown(){this.fileDropdown=!this.fileDropdown}delete(i){this.service.delete(i).subscribe({next:n=>{this.notification.success(n.message),this.loader=!1,this.getFiles()},error:n=>{let l=n.error;l?l.errors?this.notification.error(Object.values(l.errors)[0]):this.notification.error(l.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}};o.\u0275fac=function(n){return new(n||o)(_(R),_(Y),_(E),_(Z))},o.\u0275cmp=$({type:o,selectors:[["app-filemanager"]],standalone:!0,features:[I],decls:57,vars:9,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","justify-content-center","align-items-center"],[1,"mb-0","text-white"],[1,"btn","btn-primary",3,"click"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between"],[1,""],[1,"d-flex","justify-content-center","align-items-center"],[1,"m-0","px-1"],["name","example23_length","aria-controls","example23",1,"border","form-control","form-control-sm",2,"width","40px"],["value","10"],["value","25"],["value","50"],["value","100"],["value","200"],[1,"m-0","w-100","px-1"],["placeholder","Search Here..","type","text",1,"form-control",3,"change"],[1,"text-center"],[1,"pt-4","table-responsive"],[1,"d-none","row"],[1,"col-sm-6","col-md-4","col-lg-3","co","my-3"],["tabindex","-1","aria-labelledby","myLargeModalLabel","aria-modal","true","role","dialog",1,"modal","bs-example-modal-lg",3,"ngClass","ngStyle"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","myLargeModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"modal-backdrop","show"],[1,"table","border","table-striped"],[1,"text-nowrap","text-truncate"],[1,"text-nowrap"],[2,"width","50px","height","50px",3,"src"],["target","_blank",3,"href"],[1,"bt-group"],["title","Edit",1,"btn","btn-info","text-white"],[1,"icon","mdi","mdi-grease-pencil"],["title","Delete",1,"btn","btn-danger","text-white",3,"click"],[1,"icon","mdi","mdi-delete"],[1,"border","card"],[1,"el-card-item"],[1,"el-card-avatar","el-overlay-1"],[1,"w-100",3,"src"],[1,"el-overlay","scrl-up"],[1,"el-info"],[1,"btn","default","btn-outline","image-popup-vertical-fit",3,"href"],[1,"icon-magnifier"],["href","javascript:void(0);",1,"btn","default","btn-outline",3,"click"],[1,"mdi","mdi-delete"],[1,"p-2","el-card-content"],[1,"mb-0","box-title"],[1,"col-md-12"],[1,"form-group"],[1,"form-label"],["placeholder","Image","type","file",1,"form-control",3,"change"],[1,"col-md-6"],["readonly","",1,"form-control",3,"value"],[1,"col-md-12","pb-3"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-info","text-white"],[1,"img_holder"]],template:function(n,l){n&1&&(t(0,"div",0)(1,"div",1),m(2,"h4",2),e(),t(3,"div",3)(4,"div",4)(5,"ol",5)(6,"li",6)(7,"a",7),r(8,"Admin"),e()(),t(9,"li",8),r(10,"Filemanager"),e()()()()(),t(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"h4",13),r(16,"Filemanager"),e(),t(17,"a",14),h("click",function(){return l.handleModal()}),r(18,"Add New"),e()(),t(19,"div",15)(20,"div",16)(21,"div",17)(22,"div",18)(23,"p",19),r(24,"Show "),e(),t(25,"select",20)(26,"option",21),r(27,"10"),e(),t(28,"option",22),r(29,"25"),e(),t(30,"option",23),r(31,"50"),e(),t(32,"option",24),r(33,"100"),e(),t(34,"option",25),r(35,"200"),e()(),t(36,"p",26),r(37,"1 to 10 of 1 entries"),e()()(),t(38,"div",17)(39,"input",27),h("change",function(w){return l.hanldeSearch(w)}),e()()(),x(40,ae,2,0,"p",28)(41,de,17,0,"div",29),t(42,"div",30),M(43,se,16,3,"div",31,k),e(),t(45,"div",32)(46,"div",33)(47,"div",34)(48,"div",35)(49,"h4",36),r(50,"Filemanager"),e(),t(51,"button",37),h("click",function(){return l.handleModal()}),e()(),t(52,"div",38)(53,"form",39),h("ngSubmit",function(){return l.onSubmit()}),x(54,me,2,0,"p",28)(55,pe,30,5,"div",9),e()()()()(),x(56,he,1,0,"div",40),e()()()()),n&2&&(s(40),b(l.loader==!0?40:41),s(3),j(l.files),s(2),c("ngClass",U(5,ne,l.modal))("ngStyle",l.modal?T(7,le):T(8,re)),s(9),b(l.loader?54:55),s(2),b(l.modal?56:-1))},dependencies:[A,z,N,X,q,J,K,W,Q,G],styles:[".img_holder[_ngcontent-%COMP%]{height:200px;width:200px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{right:0}.el-overlay-1[_ngcontent-%COMP%]{position:relative}.el-overlay-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px}.el-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden;top:0;left:0;opacity:0;background-color:#000000b3;-webkit-transition:all .4s ease-in-out;transition:all .4s ease-in-out}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;list-style:none;height:100%;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.el-card-avatar[_ngcontent-%COMP%]:hover   .el-overlay[_ngcontent-%COMP%]{opacity:1}"]});let a=o;return a})();export{we as FilemanagerComponent};
